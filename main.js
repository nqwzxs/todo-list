(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function o(o){e(1,arguments);var n=Object.prototype.toString.call(o);return o instanceof Date||"object"===t(o)&&"[object Date]"===n?new Date(o.getTime()):"number"==typeof o||"[object Number]"===n?new Date(o):("string"!=typeof o&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function n(t){e(1,arguments);var n=o(t);return n.setHours(0,0,0,0),n}Math.pow(10,8);var r=36e5;function i(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function a(t,o){var n;e(1,arguments);var a=i(null!==(n=null==o?void 0:o.additionalDigits)&&void 0!==n?n:2);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var p,v=function(t){var e,o={},n=t.split(s.dateTimeDelimiter);if(n.length>2)return o;if(/:/.test(n[0])?e=n[0]:(o.date=n[0],e=n[1],s.timeZoneDelimiter.test(o.date)&&(o.date=t.split(s.timeZoneDelimiter)[0],e=t.substr(o.date.length,t.length))),e){var r=s.timezone.exec(e);r?(o.time=e.replace(r[1],""),o.timezone=r[1]):o.time=e}return o}(t);if(v.date){var f=function(t,e){var o=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(o);if(!n)return{year:NaN,restDateString:""};var r=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:null===i?r:100*i,restDateString:t.slice((n[1]||n[2]).length)}}(v.date,a);p=function(t,e){if(null===e)return new Date(NaN);var o=t.match(d);if(!o)return new Date(NaN);var n=!!o[4],r=u(o[1]),i=u(o[2])-1,a=u(o[3]),s=u(o[4]),c=u(o[5])-1;if(n)return function(t,e,o){return e>=1&&e<=53&&o>=0&&o<=6}(0,s,c)?function(t,e,o){var n=new Date(0);n.setUTCFullYear(t,0,4);var r=7*(e-1)+o+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+r),n}(e,s,c):new Date(NaN);var l=new Date(0);return function(t,e,o){return e>=0&&e<=11&&o>=1&&o<=(h[e]||(g(t)?29:28))}(e,i,a)&&function(t,e){return e>=1&&e<=(g(t)?366:365)}(e,r)?(l.setUTCFullYear(e,i,Math.max(r,a)),l):new Date(NaN)}(f.restDateString,f.year)}if(!p||isNaN(p.getTime()))return new Date(NaN);var y,E=p.getTime(),j=0;if(v.time&&(j=function(t){var e=t.match(c);if(!e)return NaN;var o=m(e[1]),n=m(e[2]),i=m(e[3]);return function(t,e,o){return 24===t?0===e&&0===o:o>=0&&o<60&&e>=0&&e<60&&t>=0&&t<25}(o,n,i)?o*r+6e4*n+1e3*i:NaN}(v.time),isNaN(j)))return new Date(NaN);if(!v.timezone){var T=new Date(E+j),S=new Date(0);return S.setFullYear(T.getUTCFullYear(),T.getUTCMonth(),T.getUTCDate()),S.setHours(T.getUTCHours(),T.getUTCMinutes(),T.getUTCSeconds(),T.getUTCMilliseconds()),S}return y=function(t){if("Z"===t)return 0;var e=t.match(l);if(!e)return 0;var o="+"===e[1]?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return function(t,e){return e>=0&&e<=59}(0,i)?o*(n*r+6e4*i):NaN}(v.timezone),isNaN(y)?new Date(NaN):new Date(E+j+y)}var s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(t){return t?parseInt(t):1}function m(t){return t&&parseFloat(t.replace(",","."))||0}var h=[31,null,31,30,31,30,31,31,30,31,30,31];function g(t){return t%400==0||t%4==0&&t%100!=0}var p={};function v(){return p}function f(t,n){var r,a,s,d,c,l,u,m;e(1,arguments);var h=v(),g=i(null!==(r=null!==(a=null!==(s=null!==(d=null==n?void 0:n.weekStartsOn)&&void 0!==d?d:null==n||null===(c=n.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==s?s:h.weekStartsOn)&&void 0!==a?a:null===(u=h.locale)||void 0===u||null===(m=u.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==r?r:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=o(t),f=p.getDay(),y=(f<g?7:0)+f-g;return p.setDate(p.getDate()-y),p.setHours(0,0,0,0),p}class y{todos=[];constructor(t){this.name=t}addTodo(t){this.todos.push(t)}}class E{static todos=[];static projects=[];static populateStorage(){localStorage.setItem("todos",JSON.stringify(this.todos)),localStorage.setItem("projects",JSON.stringify(this.projects))}static loadData(){this.todos=JSON.parse(localStorage.getItem("todos")),this.projects=JSON.parse(localStorage.getItem("projects")),this.projects.forEach((t=>{Object.setPrototypeOf(t,y.prototype)}))}}class j{constructor(t,e,o,n){this.title=t,this.description=e,this.dueDate=o,this.priority=n}}class T{static selectedProject=null;static createProject(t){E.projects.push(new y(t))}static deleteProject(t){const e=E.projects.indexOf(t);E.projects.splice(e,1)}static createTodo(t,e,o,n){const r=new j(t,e,o,n),i=T.selectedProject;i?i.addTodo(r):E.todos.push(r)}static deleteTodo(t){let e;e=this.selectedProject?this.selectedProject.todos:E.todos;const o=e.indexOf(t);e.splice(o,1)}static selectProject(t){T.selectedProject=E.projects.find((e=>e.name===t))}static deselectProject(){T.selectedProject=null}}class S{static inbox=document.querySelector(".menu .inbox");static today=document.querySelector(".menu .today");static thisWeek=document.querySelector(".menu .this-week");static currentPage=this.inbox;static todoBeingEdited=null;static projectBeingEdited=null;static addTodoButton=document.querySelector(".add-todo-button");static{window.localStorage.getItem("todos")&&(E.loadData(),this.updateTodosList(),this.updateProjectsList()),this.handleSelectInboxEvent(),this.handleSelectTodayEvent(),this.handleSelectThisWeekEvent(),this.handleAddTodoButton(),this.handleAddProjectButton(),this.handleTodoFormEvent(),this.handleProjectFormEvent(),this.handleOverlayEvent()}static handleSelectInboxEvent(){this.inbox.addEventListener("click",(t=>{this.currentPage=this.inbox,T.selectedProject=null,this.addTodoButton.style.display="flex",this.updateTodosList(),this.highlightCurrentPage()}))}static handleSelectTodayEvent(){this.today.addEventListener("click",(t=>{this.currentPage=this.today,this.addTodoButton.style.display="none",T.selectedProject=null,this.updateTodosList(),this.highlightCurrentPage()}))}static handleSelectThisWeekEvent(){this.thisWeek.addEventListener("click",(t=>{this.currentPage=this.thisWeek,T.selectedProject=null,this.addTodoButton.style.display="none",this.updateTodosList(),this.highlightCurrentPage()}))}static handleAddTodoButton(){this.addTodoButton.addEventListener("click",(t=>{document.querySelector(".todo-form button").textContent="Add Todo",this.toggleTodoForm()}))}static handleAddProjectButton(){document.querySelector(".add-project-button").addEventListener("click",(t=>{document.querySelector(".project-form button").textContent="Add Project",this.toggleProjectForm()}))}static toggleProjectForm(){document.querySelector(".project-form").classList.toggle("active"),document.querySelector(".overlay").classList.toggle("active")}static handleProjectFormEvent(){document.querySelector(".project-form").addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("name");this.projectBeingEdited?this.projectBeingEdited.name=e.value:T.createProject(e.value),this.projectBeingEdited=null,this.toggleProjectForm(),this.clearProjectForm(),this.updateProjectsList(),E.populateStorage()}))}static handleTodoFormEvent(){document.querySelector(".todo-form").addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("title"),o=document.getElementById("description"),n=document.getElementById("due-date"),r=document.getElementsByName("priority"),i=Array.from(r).find((t=>t.checked));this.todoBeingEdited?(this.todoBeingEdited.title=e.value,this.todoBeingEdited.description=o.value,this.todoBeingEdited.dueDate=n.value,this.todoBeingEdited.priority=i.value):T.createTodo(e.value,o.value,n.value,i.value),this.todoBeingEdited=null,this.toggleTodoForm(),this.clearTodoForm(),this.updateTodosList(),E.populateStorage()}))}static handleOverlayEvent(){document.querySelector(".overlay").addEventListener("click",(t=>{this.projectBeingEdited=null,this.todoBeingEdited=null,this.clearProjectForm(),this.clearTodoForm();const e=document.querySelector(".todo-form");document.querySelector(".project-form"),e.classList.contains("active")?this.toggleTodoForm():this.toggleProjectForm()}))}static clearProjectForm(){document.getElementById("name").value=""}static clearTodoForm(){const t=document.getElementById("title"),e=document.getElementById("description"),o=document.getElementById("due-date"),n=document.getElementById("no-priority");t.value="",e.value="",o.value="",n.checked=!0}static toggleTodoForm(){document.querySelector(".todo-form").classList.toggle("active"),document.querySelector(".overlay").classList.toggle("active")}static createTodoCard(t){const e=document.createElement("div"),o=document.createElement("span");o.classList.add("left-container");const n=document.createElement("span");n.classList.add("material-icons"),n.classList.add("check-todo-button"),n.textContent="radio_button_unchecked",o.appendChild(n);const r=document.createElement("span");r.textContent=t.title,o.appendChild(r),e.appendChild(o);const i=document.createElement("span");i.classList.add("right-container");const a=document.createElement("span");return a.textContent=t.dueDate?t.dueDate:"No due date",i.appendChild(a),e.appendChild(i),e}static updateTodosList(){const t=document.querySelector(".todos-list");document.querySelectorAll(".todos-list div").forEach((e=>{t.removeChild(e)}));let o=[];o=o.concat(E.todos),E.projects.forEach((t=>{o=o.concat(t.todos)})),o=this.currentPage===this.today?o.filter((t=>function(t){return e(1,arguments),function(t,o){e(2,arguments);var r=n(t),i=n(o);return r.getTime()===i.getTime()}(t,Date.now())}(a(t.dueDate)))):this.currentPage===this.thisWeek?o.filter((t=>function(t,o){return e(1,arguments),function(t,o,n){e(2,arguments);var r=f(t,n),i=f(o,n);return r.getTime()===i.getTime()}(t,Date.now(),o)}(a(t.dueDate)))):T.selectedProject?T.selectedProject.todos:E.todos,o.forEach((e=>{const o=this.createTodoCard(e);o.addEventListener("click",(t=>{document.querySelector(".todo-form button").textContent="Save",this.todoBeingEdited=e,this.clearTodoForm(),this.addTodoValuesToForm(e),this.toggleTodoForm()})),o.firstChild.firstChild.addEventListener("click",(t=>{T.deleteTodo(e),this.updateTodosList(),t.stopPropagation()})),t.insertBefore(o,this.addTodoButton)}))}static addTodoValuesToForm(t){const e=document.getElementById("title"),o=document.getElementById("description"),n=document.getElementById("due-date"),r=document.getElementsByName("priority");Array.from(r).find((t=>t.checked)),e.value=t.title,o.value=t.description,n.value=t.dueDate,Array.from(r).find((e=>e.value===t.priority)).checked=!0}static createProjectDiv(t){const e=document.createElement("div"),o=document.createElement("span");o.classList.add("left-container");const n=document.createElement("span");n.classList.add("material-icons"),n.textContent="folder",o.appendChild(n);const r=document.createElement("span");r.textContent=t.name,o.appendChild(r),e.appendChild(o);const i=document.createElement("span");i.classList.add("right-container");const a=document.createElement("span");a.classList.add("material-icons"),a.classList.add("edit-project-button"),a.textContent="edit",i.appendChild(a);const s=document.createElement("span");return s.classList.add("material-icons"),s.classList.add("delete-project-button"),s.textContent="delete",i.appendChild(s),e.appendChild(i),e}static updateProjectsList(){const t=document.querySelector(".projects-list");document.querySelectorAll(".projects-list div").forEach((e=>{t.removeChild(e)})),E.projects.forEach((e=>{const o=this.createProjectDiv(e);o.addEventListener("click",(t=>{this.currentPage=o,this.addTodoButton.style.display="flex",T.selectedProject=e,this.updateTodosList(),this.highlightCurrentPage()})),o.lastChild.firstChild.addEventListener("click",(t=>{document.querySelector(".project-form button").textContent="Save",this.projectBeingEdited=e,this.clearProjectForm(),this.addProjectValuesToForm(e),this.toggleProjectForm()})),o.lastChild.lastChild.addEventListener("click",(t=>{T.deselectProject(e),T.deleteProject(e),this.currentPage=this.inbox,this.highlightCurrentPage(),this.updateProjectsList(),this.updateTodosList(),t.stopPropagation()})),this.highlightCurrentPage();const n=document.querySelector(".add-project-button");t.insertBefore(o,n)}))}static addProjectValuesToForm(t){document.getElementById("name").value=t.name}static highlightCurrentPage(){document.querySelectorAll(".menu button").forEach((t=>{t.classList.remove("selected")})),document.querySelectorAll(".projects-list div").forEach((t=>{t.classList.remove("selected")})),this.currentPage.classList.add("selected")}}new S})();